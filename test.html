<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button type="submit" id="btn">Just A button</button>
    <div class="test"></div>
  </body>
  <script
    src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"
  ></script>

  <script>
    var cart = [];
    var cost1;
    for (var i = 0; i < localStorage.length; i++) {
      console.log(localStorage.key(i));

      $(".test").append(
        '<div class="row py-3 text-center">\
    <div class="col-4">\
      <p>' +
          localStorage.key(i) +
          '</p>\
    </div>\
    <div class="col-4">\
      <input type="hidden" name="itemName" value="' +
          localStorage.key(i) +
          '">\
      <button class="btn" onclick="minus($(this).parent())" >-</button>\
      <input type="text"  class="btn" id="count' +
          i +
          '" size="1" value="' +
          localStorage.getItem(localStorage.key(i)) +
          '" >\
      <button class="btn" onclick="plus($(this).parent())" >+</button>\
    </div>\
    <div class="col-4">\
      <p id="cost' +
          i +
          '" ></p>\
    </div>\
    </div>'
      );
      $.ajaxSetup({ async: false });
      $.post(
        "test2.php",
        {
          itemName: localStorage.key(i),
        },
        function (data) {
          cost = Number(data);
          cost1 = i;
          //console.log(cost1);
          //console.log("Final Cost " + cost);
          finalcost = localStorage.getItem(localStorage.key(cost1)) * cost;
          // console.log(finalcost);
          document.getElementById("cost" + cost1).innerHTML = finalcost;
          cart.push(finalcost);
          console.log(cart);
          var sum = 0;
          for (var x = 0; x < cart.length; x++) {
            sum = sum + cart[x];
          }
          var tot = "Pay Rs: " + sum;
          console.log(tot);
        }
      );
    }
  </script>
</html>
